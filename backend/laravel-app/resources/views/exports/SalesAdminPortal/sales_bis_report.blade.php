<table>
    <thead>
        <tr>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
        </tr>
    </thead>    
    <tbody>   
        <tr>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th colspan="3" valign="center" align="center">SDP</th>
            <!-- <th>M</th> -->
            <!-- <th>N</th> -->
            <th colspan="3" valign="center" align="center">APPROVED PLAN</th>
            <!-- <th>P</th> -->
            <!-- <th>Q</th> -->
            <th></th>
            <th colspan="10" valign="center" align="center">DOCUMENTS</th>
            <!-- <th>U</th>
            <th>V</th>
            <th>W</th>
            <th>X</th>
            <th>Y</th>
            <th>Z</th>
            <th>AA</th>
            <th>AB</th>
            <th>AC</th> -->
            <th></th>
            <th></th>
            <th></th>
            <th colspan="4" valign="center" align="center">CTS</th>
            <!-- <th>AG</th> -->
            <!-- <th>AH</th> -->
            <!-- <th>AI</th> -->
            <th colspan="3" valign="center" align="center">DOAS</th>
            <!-- <th>AK</th> -->
            <!-- <th>AL</th> -->
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
        </tr>                                                  
        <tr>
            <th valign="center" align="center" style="background-color: #ffe699; height: 80px; width: 200px;">ACCOUNT STATUS</th>
            <th valign="center" align="center">INSTALLMENT</th>
            <th valign="center" align="center">CASH</th>
            <th valign="center" align="center">CLIENT NO.</th>
            <th valign="center" align="center">CLIENT NAME</th>
            <th valign="center" align="center">PROMO</th>
            <th valign="center" align="center">SPECIAL APPROVAL</th>
            <th valign="center" align="center">PC</th>
            <th valign="center" align="center">SM</th>
            <th valign="center" align="center">SD</th>
            <th valign="center" align="center">SUBD.</th>
            <th valign="center" align="center">BLK</th>
            <th valign="center" align="center">LOT</th>
            <th valign="center" align="center">AREA</th>
            <th valign="center" align="center">BLK</th>
            <th valign="center" align="center">LOT</th>
            <th valign="center" align="center">AREA</th>
            <th valign="center" align="center">RESERVATION DATE</th>
            <th valign="center" align="center">SOURCE</th>
            <th valign="center" align="center">CRF</th>
            <th valign="center" align="center">RIS1</th>
            <th valign="center" align="center">RIS2</th>
            <th valign="center" align="center">1904</th>
            <th valign="center" align="center">IDS</th>
            <th valign="center" align="center">POI</th>
            <th valign="center" align="center">MC</th>
            <th valign="center" align="center">SPA</th>
            <th valign="center" align="center">ORIGINAL DOCS</th>
            <th valign="center" align="center">ORIG. DOCS VERIFIED</th>
            <th valign="center" align="center">ABROAD BASED ON</th>
            <th valign="center" align="center">REMARKS</th>
            <th valign="center" align="center">ISSUED DATE</th>
            <th valign="center" align="center">RETURNED DATE</th>
            <th valign="center" align="center">STATUS</th>
            <th valign="center" align="center">NOTARIZED DATE</th>
            <th valign="center" align="center">ISSUED DATE</th>
            <th valign="center" align="center">RETURNED DATE</th>
            <th valign="center" align="center">STATUS</th>
            <th valign="center" align="center"></th>
            <th valign="center" align="center">% of Payment as of 2021</th>
            <th valign="center" align="center">DOCS STATUS FOR COMM</th>
            <th valign="center" align="center">DOCS REMARKS FOR INC</th>
            <th valign="center" align="center">INCRE STATUS</th>
            <th valign="center" align="center">INCRE REMARKS</th>
            <th valign="center" align="center"></th>
            <th valign="center" align="center">CLIENT TYPE</th>
            <th valign="center" align="center">CLIENT STATUS ON ACCOUNT</th>
            <th valign="center" align="center">SALUTATION</th>
            <th valign="center" align="center">LAST NAME</th>
            <th valign="center" align="center">FIRST NAME</th>
            <th valign="center" align="center">MIDDLE NAME</th>
            <th valign="center" align="center">EXTN. (JR., SR., III)</th>
            <th valign="center" align="center">BIRTHDAY</th>
            <th valign="center" align="center">AGE</th>
            <th valign="center" align="center">PLACE OF BIRTH</th>
            <th valign="center" align="center">CITIZENSHIP</th>
            <th valign="center" align="center">GENDER</th>
            <th valign="center" align="center">GOVERNMENT ISSUED IDENTIFICATION</th>
            <th valign="center" align="center">PLACE AND DATE OF ISSUANCE</th>
            <th valign="center" align="center">TAX IDENTIFICATION NO</th>
            <th valign="center" align="center">CLIENT OCCUPATION</th>
            <th valign="center" align="center">COMPANY NAME AND ADDRESS</th>
            <th valign="center" align="center">MONTHLY HOUSEHOLD INCOME</th>
            <th valign="center" align="center">HOME PHONE</th>
            <th valign="center" align="center">EMAIL ADDRESS</th>
            <th valign="center" align="center">BUSINESS PHONE</th>
            <th valign="center" align="center">MOBILE NUMBER</th>
            <th valign="center" align="center">HOUSE NO.</th>
            <th valign="center" align="center">STREET</th>
            <th valign="center" align="center">BARANGAY</th>
            <th valign="center" align="center">CITY</th>
            <th valign="center" align="center">PROVINCE</th>
            <th valign="center" align="center">ZIP CODE</th>
            <th valign="center" align="center">CURRENT ADDRESS</th>
            <th valign="center" align="center">PERMANENT ADDRESS</th>
            <th valign="center" align="center">PREFERRED MAILING ADDRESS</th>
        </tr>
        @foreach($reservations as $key => $reservation)
            <tr>
                <td></td>
                <td>{{$reservation->payment_terms_type == 'in_house' ? "1":""}}</td>
                <td>{{$reservation->payment_terms_type == 'cash' ? "1":""}}</td>
                <td>{{$reservation->client_number}}</td>
                <td>{{$reservation->client->first_name ?? ''}} {{$reservation->client->last_name ?? ''}}</td>
                <td>
                    @foreach($reservation->promos as $promo)
                        {{$promo['promo_type']}}&nbsp;
                    @endforeach
                </td>
                <td></td>
                <td>{{$reservation->agent['first_name']}} {{$reservation->agent['last_name']}}</td>
                <td>
                    @if (isset($reservation->sales_manager_id))
                        {{$reservation->sales_manager->first_name}} {{$reservation->sales_manager->last_name}}
                    @else
                        @if (isset($reservation->sales_director_id))
                            {{$reservation->sales_director->first_name}} {{$reservation->sales_director->last_name}}
                        @endif
                    @endif
                </td>
                <td>
                    @if (isset($reservation->sales_director_id))
                        {{$reservation->sales_director->first_name}} {{$reservation->sales_director->last_name}}
                    @endif
                </td>
                <td>{{$reservation->subdivision}}</td>
                <td>{{$reservation->block}}</td>
                <td>{{$reservation->lot}}</td>
                <td>{{$reservation->area}}</td>
                <td></td>
                <td></td>
                <td></td>
                <td>{{date('d-M-Y', strtotime($reservation->reservation_fee_date))}}</td>
                <td>{{$reservation->source}}</td>
                <td>
                    @if (isset($reservation->client->information->attachments) && count(collect($reservation->client->information->attachments)->where('type', 'CRF')))
                        {{collect($reservation->client->information->attachments)->where('type', 'CRF')->firstWhere('status', 'for_review') ? '-' : 'OK'}}
                    @endif
                </td>
                <td>
                    @if (isset($reservation->client->information->attachments) && count(collect($reservation->client->information->attachments)->where('type', 'RIS1')))
                        {{collect($reservation->client->information->attachments)->where('type', 'RIS1')->firstWhere('status', 'for_review') ? '-' : 'OK'}}
                    @endif
                </td>
                <td>
                    @if (isset($reservation->client->information->attachments) && count(collect($reservation->client->information->attachments)->where('type', 'RIS2')))
                        {{collect($reservation->client->information->attachments)->where('type', 'RIS2')->firstWhere('status', 'for_review') ? '-' : 'OK'}}
                    @endif
                </td>
                <td>
                    @if (isset($reservation->client->information->attachments) && count(collect($reservation->client->information->attachments)->where('type', '1904')))
                        {{collect($reservation->client->information->attachments)->where('type', '1904')->firstWhere('status', 'for_review') ? '-' : 'OK'}}
                    @endif
                </td>
                <td>
                    @if (isset($reservation->client->information->attachments) && count(collect($reservation->client->information->attachments)->where('type', 'ID')))
                        {{collect($reservation->client->information->attachments)->where('type', 'ID')->firstWhere('status', 'for_review') ? '-' : 'OK'}}
                    @endif
                </td>
                <td>
                    @if (isset($reservation->client->information->attachments) && count(collect($reservation->client->information->attachments)->where('type', 'POI')))
                        {{collect($reservation->client->information->attachments)->where('type', 'POI')->firstWhere('status', 'for_review') ? '-' : 'OK'}}
                    @endif
                </td>
                <td>
                    @if (isset($reservation->client->information->attachments) && count(collect($reservation->client->information->attachments)->where('type', 'MC')))
                        {{collect($reservation->client->information->attachments)->where('type', 'MC')->firstWhere('status', 'for_review') ? '-' : 'OK'}}
                    @endif
                </td>
                <td>
                    @if (isset($reservation->client->information->attachments) && count(collect($reservation->client->information->attachments)->where('type', 'SPA')))
                        {{collect($reservation->client->information->attachments)->where('type', 'SPA')->firstWhere('status', 'for_review') ? '-' : 'OK'}}
                    @endif
                </td>
                <td>-</td>
                <td>-</td>
                <td></td>
                <td>{{$reservation->remarks}}</td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td>-</td>
                <td></td>
                <td>&nbsp;</td>
                <td></td>
                <td></td>
                <td></td>
                <td>{{$reservation->client->last_name ?? ''}}</td>
                <td>{{$reservation->client->first_name ?? ''}}</td>
                <td>{{$reservation->client->middle_name ?? ''}}</td>
                <td>{{$reservation->client->information['extension'] ?? ''}}</td>
                <td>{{isset($reservation->client->information['birth_date']) ? date('M d, Y', strtotime($reservation->client->information['birth_date'])) : ''}}</td>
                <td>{{isset($reservation->client->information['birth_date']) ? $reservation->client->information['age'] : ''}}</td>
                <td>{{isset($reservation->client->information['birth_place']) ? $reservation->client->information['birth_place'] : ''}}</td>
                <td>{{isset($reservation->client->information['citizenship']) ? $reservation->client->information['citizenship'] : ''}}</td>
                <td>{{isset($reservation->client->information['gender']) ? $reservation->client->information['gender'] : ''}}</td>
                <td>{{isset($reservation->client->information['government_issued_id']) ? $reservation->client->information['government_issued_id'] : ''}}</td>
                <td>{{isset($reservation->client->information['government_issued_id_issuance_place']) ? $reservation->client->information['government_issued_id_issuance_place'] : ''}}/{{isset($reservation->client->information['government_issued_id_issuance_date']) ? date('M d, Y', strtotime($reservation->client->information['government_issued_id_issuance_date'])) : ''}}</td>
                <td>{{isset($reservation->client->information['tax_identification_number']) ? $reservation->client->information['tax_identification_number'] : ''}}</td>
                <td>{{isset($reservation->client->information['occupation']) ? $reservation->client->information['occupation'] : ''}}</td>
                <td>{{isset($reservation->client->information['company_name']) ? $reservation->client->information['company_name'] : ''}}/{{isset($reservation->client->information['company_address']) ? $reservation->client->information['company_address'] : ''}}</td>
                <td>{{isset($reservation->client->information['monthly_household_income']) ? $reservation->client->information['monthly_household_income'] : ''}}</td>
                <td>{{isset($reservation->client->information['home_phone']) ? $reservation->client->information['home_phone'] : ''}}</td>
                <td>{{isset($reservation->client['email']) ? $reservation->client['email'] : ''}}</td>
                <td>{{isset($reservation->client->information['business_phone']) ? $reservation->client->information['business_phone'] : ''}}</td>
                <td>{{isset($reservation->client->information['mobile_number']) ? $reservation->client->information['mobile_number'] : ''}}</td>
                <td>{{isset($reservation->client->information['current_home_address_house_number']) ? $reservation->client->information['current_home_address_house_number'] : ''}}</td>
                <td>{{isset($reservation->client->information['current_home_address_street']) ? $reservation->client->information['current_home_address_street'] : ''}}</td>
                <td>{{isset($reservation->client->information['current_home_address_baranggay']) ? $reservation->client->information['current_home_address_baranggay'] : ''}}</td>
                <td>{{isset($reservation->client->information['current_home_address_city']) ? $reservation->client->information['current_home_address_city'] : ''}}</td>
                <td>{{isset($reservation->client->information['current_home_address_province']) ? $reservation->client->information['current_home_address_province'] : ''}}</td>
                <td>{{isset($reservation->client->information['current_home_address_zip_code']) ? $reservation->client->information['current_home_address_zip_code'] : ''}}</td>
                <td>
                    @if (isset($reservation->client->information))
                    {{ implode(", ", array_filter([$reservation->client->information['current_home_address'],$reservation->client->information['current_home_address_house_number'],$reservation->client->information['current_home_address_street'],$reservation->client->information['current_home_address_baranggay'],$reservation->client->information['current_home_address_city'],$reservation->client->information['current_home_address_province'],$reservation->client->information['current_home_address_country'] ?? 'Philippines',$reservation->client->information['current_home_address_zip_code']])) }}
                    @endif
                </td>
                <td>
                    @if (isset($reservation->client->information))
                    {{ implode(", ", array_filter([$reservation->client->information['permanent_home_address'],$reservation->client->information['permanent_home_address_house_number'],$reservation->client->information['permanent_home_address_street'],$reservation->client->information['permanent_home_address_baranggay'],$reservation->client->information['permanent_home_address_city'],$reservation->client->information['permanent_home_address_province'],$reservation->client->information['permanent_home_address_country'] ?? 'Philippines',$reservation->client->information['permanent_home_address_zip_code']])) }}
                    @endif
                </td>
                <td>
                    @if (isset($reservation->client->information))
                        @if ($reservation->preferred_mailing_address == 'current_home_address')
                            {{ implode(", ", array_filter([$reservation->client->information['current_home_address'],$reservation->client->information['current_home_address_house_number'],$reservation->client->information['current_home_address_street'],$reservation->client->information['current_home_address_baranggay'],$reservation->client->information['current_home_address_city'],$reservation->client->information['current_home_address_province'],$reservation->client->information['current_home_address_country'] ?? 'Philippines',$reservation->client->information['current_home_address_zip_code']])) }}
                        @else
                            {{ implode(", ", array_filter([$reservation->client->information['permanent_home_address'],$reservation->client->information['permanent_home_address_house_number'],$reservation->client->information['permanent_home_address_street'],$reservation->client->information['permanent_home_address_baranggay'],$reservation->client->information['permanent_home_address_city'],$reservation->client->information['permanent_home_address_province'],$reservation->client->information['permanent_home_address_country'] ?? 'Philippines',$reservation->client->information['permanent_home_address_zip_code']])) }}
                        @endif
                    @endif
                </td>

                
            </tr>
        @endforeach
    </tbody>
</table>
